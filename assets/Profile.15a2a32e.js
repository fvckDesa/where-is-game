import{b as y,r as l,d as s,j as i,v as p,n as j,x as w}from"./index.20a8e46f.js";import{u as N,e as S}from"./form.e20c3ba0.js";import{P as U}from"./Profile.f9504f06.js";function q(){var m,d;const{user:t}=y(),{register:a,handleSubmit:b,formState:{errors:n},setValue:c}=N(),o=l.exports.useRef(),[r,u]=l.exports.useState({file:null,url:null}),{ref:x,...g}=a("profilePicture",{onChange:e=>f(e.target.files[0]),value:r.file});l.exports.useEffect(()=>()=>URL.revokeObjectURL(r.url),[r.file]),l.exports.useEffect(()=>{c("name",t.name),c("email",t.email),r.file==null&&u(e=>({...e,url:t.profilePicture}))},[t]);async function h(e){try{await w(t.id,{...e,profilePicture:r.file})}catch(v){console.error("Somethings was wrong updating user",v)}}function f(e){!e||u({file:e,url:URL.createObjectURL(e)})}const P=l.exports.useCallback(()=>o.current.click(),[o]);return s("form",{className:"flex h-full p-8",onSubmit:b(h),children:[s("div",{className:"flex-[0.6] flex flex-col gap-4",children:[i(p,{label:"Name",type:"text",error:(m=n.name)==null?void 0:m.message,...a("name",{required:"This field is required"})}),i(p,{label:"Email",type:"text",error:(d=n.email)==null?void 0:d.message,...a("email",{required:"This field is required",validate:S})})]}),s("div",{className:"flex-[0.4] flex flex-col justify-between items-center",children:[s(j,{className:"flex justify-center items-center w-40 h-40 rounded-full border border-tiber-500 overflow-hidden transition-all",onDrop:f,dragOverClass:"ring ring-offset-2 ring-tiber-500",children:[i("img",{className:"w-full h-full object-cover cursor-pointer transition-all hover:grayscale",src:r.url||U,alt:"profile picture",referrerPolicy:"no-referrer",onClick:P}),i("input",{className:"hidden",type:"file",accept:"image/*",ref:e=>{x(e),o.current=e},...g})]}),i("button",{className:"w-full px-4 py-2 rounded-lg bg-tiber-500 text-alabaster-500 transition-colors hover:bg-tiber-600",type:"submit",children:"Update Profile"})]})]})}export{q as default};
