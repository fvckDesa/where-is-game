import{r as a,a as R,w as j,u as O,b as U,c as T,s as $,d as p,j as l,e as z,P as A,h as H,F as L,D as W,S as X,i as Y}from"./index.24d213bf.js";import{u as q}from"./useGameImage.7482bad4.js";function B(s){const[e,c]=a.exports.useState(),[r,n]=a.exports.useState(!1);a.exports.useEffect(()=>{R(s).then(t=>c({...t,characters:t.characters.map(o=>({...o,found:!1}))}))},[s]),a.exports.useEffect(()=>{e!=null&&e.characters.every(t=>t.found)&&n(!0)},[e]);function d(t){c(o=>({...o,characters:o.characters.map(i=>({...i,found:i.id===t?!0:i.found}))}))}return{game:e,setFound:d,isGameOver:r}}function J(s=!1){const[e,c]=a.exports.useState(0);return a.exports.useEffect(()=>{let r;return s?clearInterval(r):r=setInterval(()=>c(n=>n+1),1e3),()=>clearInterval(r)},[s]),e}function K(){const{x:s,y:e,setCoords:c,containerRef:r,imageRef:n}=q({x:0,y:0}),[d,t]=a.exports.useState(!1),[o,i]=a.exports.useState(),{id:m}=O(),{game:f,isGameOver:h,setFound:C}=B(m),v=J(h),{user:G}=U(),I=T();a.exports.useEffect(()=>{h&&($(m,G.name,v),I(`/leaderboard/${m}`))},[h]);function S(){i(null)}function w(u){c(u),t(!0)}function b(u){u.stopPropagation(),t(!1)}function N(u,{x:P,y}){const D=n.current.scrollWidth,F=n.current.scrollHeight,k=P*D,E=y*F,x=Y(50),g=x(s,k)&&x(e,E);i(g),g&&C(u)}return f?p("div",{className:"h-[90%] overflow-hidden relative",children:[l(z,{characters:f.characters,timer:v}),p("div",{className:"h-[90%] w-full relative",children:[l(A,{className:o?"bg-green-500":"bg-red-500",message:o?"nice":"character is not here",active:o,onClose:S}),l("div",{ref:r,className:"h-full w-full px-[60px] pb-[60px] overflow-y-scroll relative z-0",children:l(H,{ref:n,image:f.image,containerRef:r,x:s,y:e,onClick:w,children:d&&p(L,{children:[l(W,{characters:f.characters,x:s,y:e,onClose:b,onSelect:N}),l(X,{x:s,y:e})]})})})]})]}):"Loading..."}const V=j(K);export{V as default};
