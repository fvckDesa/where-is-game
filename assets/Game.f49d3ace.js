import{r as o,a as k,u as O,b as m,j as n,c as R,P as j,d as E,F as T,D as U,S as z,e as H,h as L}from"./index.1a5e24ee.js";import{u as W}from"./useGameImage.0331a174.js";function X(r){const[e,i]=o.exports.useState(),[t,c]=o.exports.useState(!1);o.exports.useEffect(()=>{k(r).then(s=>i({...s,characters:s.characters.map(a=>({...a,found:!1}))}))},[r]),o.exports.useEffect(()=>{e!=null&&e.characters.every(s=>s.found)&&c(!0)},[e]);function d(s){i(a=>({...a,characters:a.characters.map(l=>({...l,found:l.id===s?!0:l.found}))}))}return{game:e,setFound:d,isGameOver:t}}function Y(r=!1){const[e,i]=o.exports.useState(0);return o.exports.useEffect(()=>{let t;return r?clearInterval(t):t=setInterval(()=>i(c=>c+1),1e3),()=>clearInterval(t)},[r]),e}function B(){const{x:r,y:e,setCoords:i,containerRef:t,imageRef:c}=W({x:0,y:0}),[d,s]=o.exports.useState(!1),[a,l]=o.exports.useState(),{id:g}=O(),{game:f,isGameOver:h,setFound:C}=X(g),p=Y(h);function G(){l(null)}function I(u){i(u),s(!0)}function S(u){u.stopPropagation(),s(!1)}function w(u,{x:P,y:b}){const y=c.current.scrollWidth,D=c.current.scrollHeight,F=P*y,N=b*D,v=L(50),x=v(r,F)&&v(e,N);l(x),x&&C(u)}return f?m("div",{className:"h-[90%] overflow-hidden relative",children:[n(R,{characters:f.characters,timer:p}),m("div",{className:"h-[90%] w-full relative",children:[n(j,{className:a?"bg-green-500":"bg-red-500",message:a?"nice":"character is not here",active:a,onClose:G}),n("div",{ref:t,className:"h-full w-full px-[60px] pb-[60px] overflow-y-scroll relative z-0",children:n(E,{ref:c,image:f.image,containerRef:t,x:r,y:e,onClick:I,children:d&&m(T,{children:[n(U,{characters:f.characters,x:r,y:e,onClose:S,onSelect:w}),n(z,{x:r,y:e})]})})})]}),h&&n(H,{score:p})]}):"Loading..."}export{B as default};
