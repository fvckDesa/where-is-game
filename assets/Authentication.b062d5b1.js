import{r as y,K as S,d as i,F as q,H as g,j as r,x as l,B as v,M as T,Q as U,T as C,U as F,V as p,J as j}from"./index.24d213bf.js";import{u as k,i as L,a as V}from"./form.285ef807.js";function D(){var w,m,h;const{register:d,handleSubmit:f,formState:{errors:o,isSubmitting:b},getValues:c,reset:P}=k(),[s,u]=y.exports.useState(()=>S());async function x({oldPassword:a,newPassword:t}){if(s.includes("password")){await F(a,t);return}try{await p(t)}catch(e){e.code==="auth/requires-recent-login"&&(await j(),await p(t))}P({oldPassword:"",newPassword:"",confirmPassword:""})}return i(q,{children:[i(g,{title:s.includes("password")?"change password":"add password",className:"flex flex-col gap-4 w-2/3",onSubmit:f(x),children:[s.includes("password")&&r(l,{label:"Old password",type:"password",error:(w=o.oldPassword)==null?void 0:w.message,...d("oldPassword",{required:"This field is required"})}),r(l,{label:"New password",type:"password",error:(m=o.newPassword)==null?void 0:m.message,...d("newPassword",{required:"This field is required",minLength:{value:8,message:"Password must have minimum 8 characters"},validate:{includeNumber:L,includeUppercase:V,diff:a=>a!==c("oldPassword")||"The new password must be different from old password"}})}),r(l,{label:"Confirm new password",type:"password",error:(h=o.confirmPassword)==null?void 0:h.message,...d("confirmPassword",{required:"This field is required",validate:a=>a===c("newPassword")||"The passwords do not match"})}),r(v,{isLoading:b,className:"w-1/2 px-4 py-2 rounded-lg bg-tiber-500 text-alabaster-500 transition-colors hover:bg-tiber-600 disabled:bg-slate-600",children:s.includes("password")?"Change password":"Add password"})]}),r(g,{title:"sign-in methods",className:"flex flex-col gap-4",children:T.map(({logo:a,name:t,provider:e})=>i("div",{className:"flex items-center gap-2",children:[i("div",{className:"flex justify-center items-center gap-2 w-32 p-2 rounded-lg font-semibold bg-white cursor-pointer hover:bg-gray-50",children:[r("img",{className:"w-6 h-6",src:a,alt:t}),t]}),r("button",{type:"button",className:`w-32 p-2 ${s.includes(e)?"text-red-500":"text-tiber-500"} font-semibold hover:underline`,onClick:()=>s.includes(e)?U(e).then(()=>u(n=>n.filter(N=>N!==e))):C(e).then(()=>u(n=>n.concat(e))),children:s.includes(e)?"Disconnect":"Connect"})]},e))})]})}export{D as default};
